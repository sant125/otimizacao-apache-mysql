# 2v8 (8GB RAM)

## 1. Swap 4GB

```bash
sudo swapoff /swap.file
sudo dd if=/dev/zero of=/swap.file bs=1M count=4096 status=progress
sudo chmod 600 /swap.file
sudo mkswap /swap.file
sudo swapon /swap.file
```

## 2. Swappiness

```bash
sudo sysctl vm.swappiness=10
echo "vm.swappiness=10" | sudo tee -a /etc/sysctl.conf
```

## 3. MySQL

`sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf`

```ini
[mysqld]
innodb_buffer_pool_size = 2G
innodb_buffer_pool_instances = 2
max_connections = 100
thread_cache_size = 16
table_open_cache = 800
tmp_table_size = 64M
max_heap_table_size = 64M
innodb_log_file_size = 256M
innodb_flush_log_at_trx_commit = 2
innodb_flush_method = O_DIRECT
innodb_io_capacity = 400
query_cache_type = 0
```

```bash
sudo systemctl restart mysql
```

## 4. Apache

```bash
sudo a2dismod mpm_prefork
sudo a2enmod mpm_event
sudo nano /etc/apache2/mods-available/mpm_event.conf
```

```apache
<IfModule mpm_event_module>
    StartServers             3
    MinSpareThreads          50
    MaxSpareThreads          150
    ThreadsPerChild          50
    MaxRequestWorkers        100
    MaxConnectionsPerChild   5000
</IfModule>
```

```bash
sudo systemctl restart apache2
```
