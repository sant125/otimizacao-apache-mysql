# 2v4 (4GB RAM)

## 1. Swap 4GB

```bash
sudo swapoff /swap.file
sudo dd if=/dev/zero of=/swap.file bs=1M count=4096 status=progress
sudo chmod 600 /swap.file
sudo mkswap /swap.file
sudo swapon /swap.file
```

## 2. Swappiness

```bash
sudo sysctl vm.swappiness=10
echo "vm.swappiness=10" | sudo tee -a /etc/sysctl.conf
```

## 3. MySQL

`sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf`

```ini
[mysqld]
innodb_buffer_pool_size = 1G
max_connections = 50
thread_cache_size = 8
table_open_cache = 400
tmp_table_size = 32M
max_heap_table_size = 32M
innodb_log_file_size = 128M
innodb_flush_log_at_trx_commit = 2
innodb_flush_method = O_DIRECT
query_cache_type = 0
```

```bash
sudo systemctl restart mysql
```

## 4. Apache

```bash
sudo a2dismod mpm_prefork
sudo a2enmod mpm_event
sudo nano /etc/apache2/mods-available/mpm_event.conf
```

```apache
<IfModule mpm_event_module>
    StartServers             2
    MinSpareThreads          25
    MaxSpareThreads          75
    ThreadsPerChild          25
    MaxRequestWorkers        50
    MaxConnectionsPerChild   3000
</IfModule>
```

```bash
sudo systemctl restart apache2
```
